function voteApi(){this.movie_id,this.vote_value=0,this.vote_links=$("#rating a"),this.init()}$(document).ready(function(){$(".animsition").animsition({inClass:"fade-in-left",outClass:"fade-out-right",inDuration:1500,outDuration:800,linkElement:".animsition-link",loading:!0,loadingParentElement:"body",loadingClass:"animsition-loading",loadingInner:"",timeout:!1,timeoutCountdown:5e3,onLoadEvent:!0,browser:["animation-duration","-webkit-animation-duration"],overlay:!1,overlayClass:"animsition-overlay-slide",overlayParentElement:"body",transition:function(t){window.location.href=t}})}),voteApi.prototype.init=function(){this.attachClick()},voteApi.prototype.attachClick=function(){var t=this;this.vote_links.click(function(i){i.preventDefault(),t.movie_id=$(this).attr("data-movie_id"),t.vote_value=t.vote_links.index(this)+1,t.submit()})},voteApi.prototype.submit=function(){var t=this;this.vote_value>0&&this.movie_id>0&&$.ajax({url:"/voteapi",method:"POST",data:{csrf_test_name:csrfHash,movie_id:this.movie_id,rate:this.vote_value},success:function(i){if(i.success){$("#votes_count").html(i.vote_count);for(var o=0;o<5;o++)o<i.vote_avg?t.vote_links.eq(o).find("span").addClass("glyphicon-star").removeClass("glyphicon-star-empty"):t.vote_links.eq(o).find("span").addClass("glyphicon-star-empty").removeClass("glyphicon-star"),t.vote_links.eq(o).addClass("disabled")}else alert("Error: please refresh and try again.")}})},objVoteApi=new voteApi;