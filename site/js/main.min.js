function voteApi(){this.movie_id,this.vote_value=0,this.vote_links=$("#rating a"),this.init()}voteApi.prototype.init=function(){this.attachClick()},voteApi.prototype.attachClick=function(){var t=this;this.vote_links.click(function(i){i.preventDefault(),t.movie_id=$(this).attr("data-movie_id"),t.vote_value=t.vote_links.index(this)+1,t.submit()})},voteApi.prototype.submit=function(){var t=this;this.vote_value>0&&this.movie_id>0&&$.ajax({url:"/voteapi",method:"POST",data:{csrf_test_name:csrfHash,movie_id:this.movie_id,rate:this.vote_value},success:function(i){if(i.success){$("#votes_count").html(i.vote_count);for(var e=0;e<5;e++)e<i.vote_avg?t.vote_links.eq(e).find("span").addClass("glyphicon-star").removeClass("glyphicon-star-empty"):t.vote_links.eq(e).find("span").addClass("glyphicon-star-empty").removeClass("glyphicon-star"),t.vote_links.eq(e).addClass("disabled")}else alert("Error: please refresh and try again.")}})},objVoteApi=new voteApi;